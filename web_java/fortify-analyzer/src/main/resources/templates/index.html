<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>룰 검색</title>
    </head>
<body>
    <h1>룰 이름으로 외부 표준 검색하기</h1>
    <p>검색할 규칙 이름의 일부를 입력하세요.</p>
    
    <form action="/" method="get">
        <div>
            <label for="keyword">규칙 이름:</label>
            <input type="text" id="keyword" name="keyword" required th:value="${searchedTerm} ?: ''">
        </div>
        <br/>
        <button type="submit">검색</button>
    </form>

    <hr style="margin: 20px 0;">

    <div class="results">
        <div th:if="${foundRules}">
            <h3>
                '<span th:text="${searchedTerm}"></span>'(으)로 검색된 규칙 목록
                (<span th:text="${#lists.size(foundRules)}">0</span>개)
            </h3>
            <p>아래 목록에서 상세 정보를 볼 규칙을 선택하세요.</p>
            <ul>
                <li th:each="rule : ${foundRules}">
                    <a th:href="@{/(ruleId=${rule.id})}" th:text="${rule.ruleName}">Rule Name</a>
                </li>
            </ul>
        </div>

        <div th:if="${selectedRule}">
            <h3>✅ 선택된 규칙: '<span th:text="${selectedRule.ruleName}"></span>'</h3>
            <p>이 규칙과 관련된 외부 표준 목록입니다:</p>
            <ul th:if="${mappings != null and not #lists.isEmpty(mappings)}">
                <li th:each="mapping : ${mappings}" th:text="${mapping.standardInfo}">Standard Info</li>
            </ul>
            <p th:if="${mappings == null or #lists.isEmpty(mappings)}">관련된 외부 표준 정보가 없습니다.</p>
        </div>
    </div>
</body>
</html>